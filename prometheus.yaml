global:
  scrape_interval: 15s
  evaluation_interval: 15s

scrape_configs:
  # 1. Prometheus self-metrics
  - job_name: prometheus
    static_configs:
      - targets: ["localhost:9090"]

  # 2. Backend microservices
  - job_name: backend-http
    static_configs:
      - targets: ["backend-http:8880"]  # metrics endpoint
  - job_name: backend-auth
    static_configs:
      - targets: ["backend-auth:8882"]
  - job_name: backend-search
    static_configs:
      - targets: ["backend-search:8883"]

  # 3. Node exporter for CPU, memory, disk
  - job_name: node
    static_configs:
      - targets: ["node-exporter:9100"]

# Optional: relabel to add instance/service labels